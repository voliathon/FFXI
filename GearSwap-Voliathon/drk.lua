-- ░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓██████▓▒░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓███████▓▒░                       
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░                      
 -- ░▒▓█▓▒▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░                      
 -- ░▒▓█▓▒▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓████████▓▒░ ░▒▓█▓▒░   ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░                      
  -- ░▒▓█▓▓█▓▒░ ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░                      
  -- ░▒▓█▓▓█▓▒░ ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░                      
   -- ░▒▓██▓▒░   ░▒▓██████▓▒░░▒▓████████▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░                      
                                                                                                                                    
                                                                                                                                    
-- ░▒▓███████▓▒░ ░▒▓██████▓▒░░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░ 
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░     
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░     
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓███████▓▒░░▒▓███████▓▒░       ░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒▒▓███▓▒░▒▓████████▓▒░  ░▒▓█▓▒░     
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░     
-- ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░     
-- ░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░     
                                                                                                                                   
--Food to Eat
--    Recomended:
--    Miso Ramen
    -- Stats: HP+100, STR+5, VIT+5, DEF+10% (Max. 170), "Magic Def. Bonus"+5, Magic Evasion +10% (Max. 50),"Resist Slow" +10.
        -- The best defensive tanking food there is. It couples HP+, Defense, and Magic Evasion+ all into one food.
            -- Purchased from the Auction House. Crafted only.
    -- Om. Sandwich
    -- Stats: HP+11% (Max. 150), VIT+7, MND+7, Accuracy+11% (Max. 80), DEF+11% (Max. 120), Enmity+4.
        -- Introduced in The Voracious Resurgence missionline. Comparable to Miso Ramen in HP and Defense; exchanging Magic Evasion and Magic Defense Bonus for Accuracy and Enmity.
        -- Purchased from the Auction House. Crafted only.

-- Alternatives:

    -- Black Curry
    -- Stats: (DEX+2, VIT+4, INT+1, Accuracy+5, Ranged Accuracy+5, Evasion+5, DEF+15% (Max. 180), "Resist Sleep"+3, HP recovered while healing +2, MP recovered while healing +1)
        -- The next best thing. This food actually has 10 more defense than Miso Ramen, but lacks the other benefits. The silver lining is that they are a fourth to a fifth the price of Miso depending on the market.
            -- Purchased from the Curio Moogle for 4,000 gil, 48,000 a stack.
    -- Tavnazian Taco
    -- Stats: (HP+20, MP+20, DEX+4, VIT+6, AGI+4, CHR+4, DEF+25% (Max. 150), HP and MP recovered while healing +1)
        -- The once famous food. There is no reason to really use this anymore, but if you are a lower level it will grant more defense than one of these higher level items given its lower cap, but higher percentage increase.
            -- Purchased from the Curio Moogle for 4,000 gil, 48,000 a stack.
    -- Rabbit Pie
    -- Stats: (STR+5 VIT+5 INT-2 Attack+25% (Max. 100) Ranged Attack+25% (Max. 100) DEF+25% (Max. 100))
        -- An honorable mention. The attack and defense parameters aren't as high given it's hybrid status but definitely worth looking at.
            -- Purchased from Curio Moogle for 3,000 gil, 36,000 gil a stack.
    -- Fried Popoto
    -- Stats: (HP +30, VIT +2, Element: Fire +20, Defense +20% (Cap:145), Subtle Blow +8)
        -- This food is as cheap as it gets, excluding the crystal it costs less than 300 gil to make 6 of these a synth. Making these in bulk to store and use for Ambuscade spam and similar events will cost you next to nothing. Even if you have to shout and pay a level 90+ cook 50-100k to make them for you. It would still only cost you roughly 10-20k a stack of Fried Popotos.
            -- Purchased from the Auction House, crafted only.

function get_sets()
	-- Set macro book/set --
	send_command('input /macro book 12;wait .1;input /macro set 2')

	-- Binds for modes
	-- Toggle Weapon sets | Ctrl F8 or Alt F8
	send_command('bind ^f8 gs c C8') 
	send_command('bind !f8 gs c reverse Weapon set')

	-- Toggle Engaged sets | Ctrl F9 or Alt F9
	send_command('bind ^f9 gs c C9')
	send_command('bind !f9 gs c reverse Engaged set')

	-- Toggle Idle sets | Ctrl F10 or Alt F10
	send_command('bind !f10 gs c C10') 
	send_command('bind ^f10 gs c reverse Idle set')

	
	--Job Ability Sets--
	sets.JA = {}
	sets.JA.Waltz = {legs="Dashing subligar"}
	sets.JA.BloodWeapon = { body="Fallen's Cuirass +3" }
	sets.JA.Souleater = { head="Ignominy Burgeonet +4"}
	sets.JA.ArcaneCircle = { feet="Ignominy Sollerets +2"}
	sets.JA.LastResort = { feet="Fallen's Sollerets +3"}
	sets.JA.WeaponBash = { hands="Ignominy Gauntlets +2"}
	sets.JA.DarkSeal = { head="Fallen's Burgeonet +4"}
	sets.JA.NetherVoid = { legs="Heathen's Flanchard +3"}

	sets.Enhancing = {
		ammo="Staunch Tathlum +1",
		head="Befouled Crown",
		body={ name="Yorium Cuirass", augments={'Spell interruption rate down -10%','Phalanx +3'}},
		legs={ name="Carmine Cuisses +1", augments={'Accuracy+20','Attack+12','"Dual Wield"+6'}},
		feet={ name="Carmine Greaves +1", augments={'Accuracy+12','DEX+12','MND+20'}},
		neck="Voltsurge Torque",
		waist="Austerity Belt +1",
		left_ear="Magnetic Earring",
		right_ear="Halasz Earring",
		left_ring="Stikini Ring +1",
		right_ring="Stikini Ring +1",
		back="Solemnity Cape"
	}

	--FastCast set
	sets.FastCast = {
		head="Sakpata's Helm",
		hands={ name="Odyssean Gauntlets", augments={'"Fast Cast"+1','CHR+1','"Refresh"+1','Mag. Acc.+14 "Mag.Atk.Bns."+14',}},
		feet={ name="Carmine Greaves +1", augments={'Accuracy+12','DEX+12','MND+20',}},
		neck="Voltsurge Torque",
		waist="Ninurta's Sash",
		left_ear="Loquac. Earring",
		right_ear="Malignance Earring"
	}

	--Phalanx--
	sets.Phalanx = {
		main="Sakpata's Sword",
		sub={ name="Priwen", augments={'HP+50','Mag. Evasion+50','Damage Taken -3%'}},
		ammo="Staunch Tathlum +1",
		head="Yorium Barbuta",
		body="Yorium Cuirass",
		hands={ name="Souv. Handsch. +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		legs="Sakpata's Cuisses",
		feet={ name="Souveran Schuhs +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		neck="Voltsurge Torque",
		waist="Audumbla Sash",
		left_ear="Mimir Earring",
		right_ear="Loquac. Earring",
		left_ring="Stikini Ring +1",
		right_ring="Stikini Ring +1",
		back="Weard Mantle"
	}

	sets.SIR = {
		ammo="Staunch Tathlum +1", --11
		body={ name="Taeon Tabard", augments={'Spell interruption rate down -10%','Phalanx +3'}}, --10
		hands="Regal Gauntlets", --10
		legs={ name="Carmine Cuisses +1", augments={'Accuracy+20','Attack+12','"Dual Wield"+6'}}, --20
		feet={ name="Taeon Boots", augments={'Spell interruption rate down -9%','Phalanx +3'}}, --9
		neck={ name="Loricate Torque +1", augments={'Path: A',}}, --5
		waist="Audumbla sash", --10
		left_ear="Halasz Earring", --5
		right_ear="Magnetic Earring" --8
	}

	-- --Enmity set for high hate generating spells and JAs
	-- sets.Enmity = {
		-- ammo="Amar Cluster",
		-- head={ name="Souv. Schaller +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		-- body={ name="Souv. Cuirass +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		-- hands={ name="Souv. Handsch. +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		-- legs={ name="Souv. Diechlings +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		-- feet={ name="Souveran Schuhs +1", augments={'HP+105','Enmity+9','Potency of "Cure" effect received +15%'}},
		-- neck="Warder's Charm",
		-- waist="Grunfeld Rope",
		-- left_ear="Cryptic Earring",
		-- right_ear={ name="Moonshade Earring", augments={'Attack+4','equip Bonus +250',}},
		-- left_ring="Moonlight Ring",
		-- right_ring="Epaminondas's Ring",
		-- back="Vespid Mantle"  
	-- }

	sets.Drain = {
		ammo="Pemphredo Tathlum",
		head="Fall. Burgeonet +4",
		body="Heath. Cuirass +3",
		hands={ name="Fall. Fin. Gaunt. +4", augments={'Enhances "Diabolic Eye" effect',}},
		legs="Heath. Flanchard +3",
		feet={ name="Carmine Greaves +1", augments={'Accuracy+12','DEX+12','MND+20',}},
		neck="Voltsurge Torque",
		waist="Austerity Belt +1",
		left_ear="Magnetic Earring",
		right_ear="Brutal Earring",
		left_ring="Stikini Ring +1",
		right_ring="Archon Ring",
		back={ name="Ankou's Mantle", augments={'DEX+20','Accuracy+20 Attack+20','Accuracy+10','"Dbl.Atk."+10','Phys. dmg. taken-10%',}}
	}

	sets.DreadSpikes  = {
		main="Crepuscular scythe",
		sub="Utu grip",
		ammo="Staunch Tathlum +1",
		head="Ratri Sallet +1",
		body="Heath. Cuirass +3",
		hands={ name="Sakpata's Gauntlets", augments={'Path: A',}},
		legs={ name="Sakpata's Cuisses", augments={'Path: A',}},
		feet={ name="Sakpata's Leggings", augments={'Path: A',}},
		neck="Null Loop",
		waist="Flume Belt +1",
		left_ear="Tuisto Earring",
		right_ear={ name="Odnowa Earring +1", augments={'Path: A',}},
		left_ring="Fortified Ring",
		right_ring="Moonlight Ring",
		back="Engulfer Cape +1"	
	}
	
	--Engaged Sets--
	sets.engaged = {}
	sets.engaged.index = {'Movement', 'BadAss', 'NewTurtle', 'Evasion', 'Accuracy', 'TreasureHunter', 'Reraise'}
	engaged_ind = 1

	sets.engaged.Movement = {
		ammo="Coiste Bodhar",
		head="Heathen's burgeonet +3",
		body="Sakpata's Plate",
		hands="Sakpata's Gauntlets",
		legs="Sakpata's Cuisses",
		feet="Sakpata's Leggings",
		neck={ name="Abyssal Beads +2", augments={'Path: A',}},
		waist="Ioskeha Belt +1",
		left_ear="Brutal Earring",
		right_ear={ name="Heath. Earring +1", augments={'System: 1 ID: 1676 Val: 0','Accuracy+12','Mag. Acc.+12','Weapon skill damage +2%',}},
		left_ring="Shneddick Ring",
		right_ring="Moonlight Ring",    
		back={ name="Ankou's Mantle", augments={'DEX+20','Accuracy+20 Attack+20','Accuracy+10','"Dbl.Atk."+10','Phys. dmg. taken-10%'}}
	}
  
	--offensive melee set
	sets.engaged.BadAss = {
		ammo="Coiste Bodhar",
		head="Flam. Zucchetto +2",
		body="Sakpata's Plate",
		hands="Sakpata's Gauntlets",
		legs="Ignominy flanchard +4",
		feet="Flam. Gambieras +2",
		neck="Abyssal Bead Necklace +2",
		waist="Ioskeha Belt +1",
		left_ear="Cessance Earring",
		right_ear="Brutal Earring",
		left_ring="Chirich Ring +1",
		right_ring="Flamma ring",
		back={ name="Ankou's Mantle", augments={'DEX+20','Accuracy+20 Attack+20','Accuracy+10','"Dbl.Atk."+10','Phys. dmg. taken-10%'}}
	}

	--New Tank Gear
	sets.engaged.NewTurtle = {
		ammo="Coiste Bodhar",
		head="Sakpata's Helm",
		body="Sakpata's Plate",
		hands="Sakpata's Gauntlets",
		legs="Sakpata's Cuisses",
		feet="Sakpata's Leggings",
		neck={ name="Abyssal Beads +2", augments={'Path: A',}},
		waist="Ioskeha Belt +1",
		left_ear="Brutal Earring",
		right_ear={ name="Heath. Earring +1", augments={'System: 1 ID: 1676 Val: 0','Accuracy+12','Mag. Acc.+12','Weapon skill damage +2%',}},
		left_ring="Moonlight Ring",
		right_ring="Fortified Ring",
		back={ name="Ankou's Mantle", augments={'DEX+20','Accuracy+20 Attack+20','Accuracy+10','"Dbl.Atk."+10','Phys. dmg. taken-10%',}}
	}  

	--Evasion
	sets.engaged.Evasion = {
		ammo="Staunch Tathlum +1",
		head="Nyame Helm",
		body="Nyame Mail",
		hands="Nyame Gauntlets",
		legs="Nyame Flanchard",
		feet="Nyame Sollerets",
		neck="Null loop",
		waist="Null belt",
		left_ear="Tuisto Earring",
		right_ear="Cryptic earring",
		left_ring="Moonlight Ring",
		right_ring="Fortified Ring",
		back="Moonlight Cape"
	}

	sets.engaged.Accuracy = {
		ammo="Amar Cluster",
		head="Heathen's burgeonet +3",
		body="Nyame Mail",
		hands="Heathen's gauntlets +3",
		legs="Ignominy flanchard +4",
		feet="Nyame Sollerets",
		neck="Null loop",
		waist="Null belt",
		left_ear="Brutal Earring",
		right_ear={ name="Heath. Earring +1", augments={'System: 1 ID: 1676 Val: 0','Accuracy+12','Mag. Acc.+12','Weapon skill damage +2%',}},
		left_ring="Chirich Ring +1",
		right_ring="Chirich Ring +1",
		back={ name="Ankou's Mantle", augments={'DEX+20','Accuracy+20 Attack+20','Accuracy+10','"Dbl.Atk."+10','Phys. dmg. taken-10%'}}
	}

	sets.engaged.TreasureHunter = {
		waist="Chaac Belt",
		body="Volte jupon"
	}

	sets.engaged.Reraise = {
		ammo="Staunch Tathlum +1",
		head="Crepuscular Helm",
		body="Crepuscular Mail",
		hands="Sakpata's Gauntlets",
		legs="Sakpata's Cuisses",
		feet="Sakpata's Leggings",
		neck="Null loop",
		waist="Null belt",
		left_ear="Hearty Earring",
		right_ear={ name="Odnowa Earring +1", augments={'Path: A'}},
		left_ring="Moonlight Ring",
		right_ring="Fortified Ring",
		back="Moonlight Cape"  
	}

	--Catastrophe
	sets.Catastrophe = {
		ammo="Knobkierrie",
		head="Nyame Helm",
		body="Ig. Cuirass +4",
		hands="Nyame gauntlets",
		legs="Fallen's flanchard +4",
		feet="Heathen's sollerets +3",
		neck="Abyssal Bead Necklace +2",
		waist="Sailfi Belt +1",
		left_ear={ name="Moonshade Earring", augments={'Attack+4','equip Bonus +250'}},
		right_ear="Thrud Earring",
		left_ring="Epaminondas's Ring",
		right_ring="Sroda ring",
		back={ name="Ankou's Mantle", augments={'STR+20','Accuracy+20 Attack+20','STR+10','Weapon skill damage +10%'}}
	}

	--STR and WSD gears
	sets.STRWSD = {
		ammo="Amar Cluster",
		head="Nyame helm",
		body="Ig. Cuirass +4",
		hands="Nyame gauntlets",
		legs="Fallen's flanchard +4",
		feet="Heathen's sollerets +3",
		neck="Abyssal Bead Necklace +2",
		waist="Fotia Belt",
		left_ring="Epaminondas's Ring",
		right_ring="Sroda ring",
		back={ name="Ankou's Mantle", augments={'STR+20','Accuracy+20 Attack+20','STR+10','Weapon skill damage +10%'}}
	}

	sets.SavageBlade = {
		ammo="Knobkierrie",
		head="Nyame helm",
		body="Ig. Cuirass +4",
		hands="Nyame gauntlets",
		legs="Fallen's flanchard +4",
		feet="Heathen's sollerets +3",
		neck="Abyssal Bead Necklace +2",
		waist="Fotia Belt",
		left_ring="Epaminondas's Ring",
		right_ring="Sroda ring",
		back={ name="Ankou's Mantle", augments={'STR+20','Accuracy+20 Attack+20','STR+10','Weapon skill damage +10%'}}
	}


	-- Idle Sets Toggle-- Alt+F10 or Ctrl+F10
	sets.idle = {}
	sets.idle.index = {'PDTMovement', 'Craft'}
	idle_ind = 1      
	
	sets.idle.PDTMovement = set_combine(sets.engaged.Movement,  {})

	sets.idle.Craft = set_combine(sets.engaged.Movement, {
		main="Caduceus",
		sub="Br. escutcheon",
		body="Alchemist's smock",
		neck="Alchemist's torque",
		left_ring="Artificer's Ring",
		right_ring="Craftmaster's ring",
		waist="Alchemist's belt"
	}) 
	
	
	--Weapon Sets--
	sets.weapon = {}
	sets.weapon.index = {'Apocalypse','Naegling','LoxoticMace','Lycurgos','Dolichenus'}
	weapon_ind = 1 

	sets.weapon.Apocalypse = {
		main="Apocalypse",
		sub="Utu Grip"
	}


	sets.weapon.Naegling = {
		main="Naegling",
		sub="Blurred Shield +1"
	}

	sets.weapon.LoxoticMace = {
		main="Loxotic Mace +1",
		sub="Blurred Shield +1"
	}

	sets.weapon.Lycurgos = {
		main="Lycurgos",
		sub="Utu Grip"
	}

	sets.weapon.Dolichenus = {
		main="Dolichenus",
		sub="Blurred Shield +1"
	}

end

-- Precast Logic --
function precast(spell,abil)
	-- Dark Knight Abilities --
	if spell.type == 'JobAbility' then	
		if string.find(spell.english, 'Waltz') then
			equip(sets.JA.Waltz)
		elseif spell.name == 'Blood Weapon' then
			equip(sets.JA.BloodWeapon)
		elseif spell.name == 'Souleater' then
			equip(sets.JA.Souleater)
		elseif spell.name == 'Arcane Circle' then
			equip(sets.JA.ArcaneCircle)
		elseif spell.name == 'Last Resort' then
			equip(sets.JA.LastResort)
		elseif spell.name == 'Weapon Bash' then
			equip(sets.JA.WeaponBash)
		elseif spell.name == 'Dark Seal' then
			equip(sets.JA.DarkSeal)
		elseif spell.name == 'Nether Void' then
			equip(sets.JA.NetherVoid)
		end  
	end
	
	--Dark Knight Weaponskills
    if spell.type == 'WeaponSkill' then		
		if spell.name == 'Catastrophe' then
			equip(sets.Catastrophe)
		elseif spell.name == 'Cross Reaper' then
			equip(sets.STRWSD)
		elseif spell.name == 'Savage Blade' then
			equip(sets.SavageBlade)
		else
			equip(sets.SavageBlade)
		end
	end
	
	--Utsusemi Check
	if string.find(spell.name,'Utsusemi') then
		equip({neck="Magoraga Beads"})
	end

	if spell.skill == 'Enhancing Magic' then
		equip(sets.FastCast)
	end
	if spell.action_type == 'Magic' then
		equip(sets.FastCast)
	end
  
end



-- Midcast
function midcast(spell,act,arg)
  
	if spell.name == "Dread Spikes" then
		equip(sets.DreadSpikes)
	end

	if string.find(spell.name,'Absorb-TP') then
		equip({hands="Heathen's gauntlets +3"})
	end

	if string.find(spell.name,'Absorb-') then
		equip({hands="Ignominy Burgeonet +4"})
	end  

	if string.find(spell.english,'Drain') then
		equip(sets.Drain)
	end

	if spell.skill == 'Enhancing Magic' then
		if spell.name == 'Phalanx' then
			equip(sets.Phalanx)
		end
		if spell.name == "Blink" or spell.name == "Stoneskin" then
		equip(sets.SIR)
		end
	end

	if spell.name == "Stun" then
		equip(sets.FastCast)
	end
	if spell.name == "Repose" or spell.skill == 'Enfeebling Magic' then
		equip(sets.MagicAcc)
	end
  
end

function aftercast(spell)
	equip_current()
end


function equip_current()
	equip_weapon()
	status_change()
end


function equip_weapon()
	equip(sets.weapon[sets.weapon.index[weapon_ind]])
end


-- Only want to handle engaged vs idle for this play style
function status_change()
	if player.status == 'Engaged' then
		equip(sets.engaged[sets.engaged.index[engaged_ind]])
	elseif player.status == 'Idle' then
		equip(sets.idle[sets.idle.index[idle_ind]])
	end
end
	

--Alt+F8 or Ctrl+F8  --> Toggle WEAPONS
--Alt+F9 or Ctrl+F9  --> Toggle ENGAGED Equipment
--Alt+F10 or Ctrl+F10  --> Toggle IDLE Equipment
function self_command(command)
	if command == 'C8' then 
		weapon_ind = weapon_ind +1
		if weapon_ind > #sets.weapon.index then weapon_ind = 1 end
		send_command('@input /echo <----- WEAPONS changed to '..sets.weapon.index[weapon_ind]..' ----->')
		equip_weapon()
	elseif command == 'reverse Weapon set' then 
		weapon_ind = weapon_ind -1
		if weapon_ind == 0 then weapon_ind = #sets.weapon.index end
		send_command('@input /echo <----- WEAPONS changed to '..sets.weapon.index[weapon_ind]..' ----->')
		equip_weapon()
	elseif command == 'C9' then
		engaged_ind = engaged_ind +1
		if engaged_ind > #sets.engaged.index then engaged_ind = 1 end
		send_command('@input /echo <----- ENGAGED changed to '..sets.engaged.index[engaged_ind]..' ----->')
		equip_current()
	elseif command == 'reverse Engaged set' then
		engaged_ind = engaged_ind -1
		if engaged_ind == 0 then engaged_ind = #sets.engaged.index end
		send_command('@input /echo <----- ENGAGED changed to '..sets.engaged.index[engaged_ind]..' ----->')
		equip_current()
	elseif command == 'C10' then
		idle_ind = idle_ind +1
		if idle_ind > #sets.idle.index then idle_ind = 1 end
		send_command('@input /echo <----- IDLE changed to '..sets.idle.index[idle_ind]..' ----->')
		equip_current()
	elseif command == 'reverse Idle set' then
		idle_ind = idle_ind -1
		if idle_ind == 0 then idle_ind = #sets.idle.index end
		send_command('@input /echo <----- IDLE changed to '..sets.idle.index[idle_ind]..' ----->')
		equip_current() 
	end	 
end

-- Send tell to self if I died --
windower.register_event('status change', function()
	if player.status == 'Dead' then
		send_command('@input /tell <me> Wakies Voliathon! You died.')
	end
end)
